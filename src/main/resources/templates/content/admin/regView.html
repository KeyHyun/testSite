<div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
    <div class="modal-content">
        <div class="modal-header">
            <h5 class="modal-title" id="exampleModalCenteredScrollableTitle">Choose a thumbnail and category</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-md-5" style="height: auto">
                        <img class="img-fluid img-thumbnail" id="preview" style="width:100%; height: 150px;" th:src="@{/img/noData.jpg}" alt="thumbnail"/>
                    </div>
                    <div class="col-md-7">
                        <input class="form-control form-control-sm" name="file" type="file" id="fileUpload" accept="image/*" onchange="readURL(this);"/>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button type="button" id="regBtn" class="btn btn-primary">제출</button>
        </div>
    </div>
</div>
<script>

    var clickChk = false;

    $('.btn-close').on('click', function (){
        console.log("click");
        $('.modal').css('display', 'none').removeClass("show");
        $('.modal-backdrop').css('display', 'none');
        $('.modal').html("");
    });

    $('#regBtn').on('click', function(){

        if(clickChk){
            return;
        }else{
            clickChk = true;
        }

        var formData = new FormData($('#writeForm')[0]);

        const imageInput = $("#fileUpload")[0];
        formData.append('file', imageInput.files[0]);

        $.ajax({
            type: "post",
            url: "/admin/regist",
            processData: false,
            contentType: false,
            data:formData,
            dataType:"json",
            success: function (data) {
                if(data == true){
                    alert("등록이 완료되었습니다.");
                    $('.btn-close').trigger('click');
                    location.href="/admin/main";
                }else{
                    alert("등록 실패했습니다.");
                }
            }
        });
    });
</script>